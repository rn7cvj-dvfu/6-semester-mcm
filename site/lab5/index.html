<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Лабораторная №5 - Уравнение переноса</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: "blue-600",
              secondary: "blue-500",
            },
          },
        },
      };
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeric/1.2.6/numeric.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="./script.js" defer></script>
  </head>

  <body
    class="bg-slate-100 text-slate-800 font-sans antialiased flex flex-row space-x-4 p-4 h-screen"
  >
    <div class="w-80 flex flex-col space-y-4">
      <a class="bg-white p-4 shadow-xl rounded-lg" href="../index.html"
        >&larr; Назад к выбору работ</a
      >

      <div
        id="sidebar"
        class="bg-white shadow-xl rounded-lg flex-grow flex flex-col min-h-0 py-4"
      >
        <h1 class="text-2xl font-bold text-blue-600 px-4">Параметры</h1>

        <div class="flex-grow overflow-y-auto space-y-2 my-4 px-4">
          <div class="control-group">
            <label for="L" class="block text-sm font-medium text-slate-700 mb-1"
              >Длина (L)</label
            >
            <div class="flex items-center">
              <input
                type="range"
                id="L"
                min="1"
                max="10"
                value="2"
                step="0.5"
                class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-500"
              />
              <span
                class="slider-value ml-3 text-sm text-slate-600 w-10 text-right"
                id="L-value"
                >2</span
              >
            </div>
          </div>

          <div class="control-group">
            <label
              for="nx"
              class="block text-sm font-medium text-slate-700 mb-1"
              >Точки в пространстве (nx)</label
            >
            <div class="flex items-center">
              <input
                type="range"
                id="nx"
                min="51"
                max="501"
                value="201"
                step="10"
                class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-500"
              />
              <span
                class="slider-value ml-3 text-sm text-slate-600 w-10 text-right"
                id="nx-value"
                >201</span
              >
            </div>
          </div>

          <div class="control-group">
            <label for="c" class="block text-sm font-medium text-slate-700 mb-1"
              >Скорость (c)</label
            >
            <div class="flex items-center">
              <input
                type="range"
                id="c"
                min="0.1"
                max="5"
                value="1"
                step="0.1"
                class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-500"
              />
              <span
                class="slider-value ml-3 text-sm text-slate-600 w-10 text-right"
                id="c-value"
                >1</span
              >
            </div>
          </div>

          <div class="control-group">
            <label
              for="CFL"
              class="block text-sm font-medium text-slate-700 mb-1"
              >Число Куранта (CFL)</label
            >
            <div class="flex items-center">
              <input
                type="range"
                id="CFL"
                min="0.1"
                max="2"
                value="0.9"
                step="0.05"
                class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-500"
              />
              <span
                class="slider-value ml-3 text-sm text-slate-600 w-10 text-right"
                id="CFL-value"
                >0.9</span
              >
            </div>
          </div>

          <div class="control-group">
            <label for="T" class="block text-sm font-medium text-slate-700 mb-1"
              >Время симуляции (T)</label
            >
            <div class="flex items-center">
              <input
                type="range"
                id="T"
                min="1"
                max="20"
                value="12"
                step="1"
                class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-blue-500"
              />
              <span
                class="slider-value ml-3 text-sm text-slate-600 w-10 text-right"
                id="T-value"
                >12</span
              >
            </div>
          </div>

          <div class="control-group">
            <label
              for="initialCondition"
              class="block text-sm font-medium text-slate-700 mb-1"
              >Начальное условие</label
            >
            <select
              id="initialCondition"
              class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-slate-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm"
            >
              <option value="box" selected>Прямоугольный импульс</option>
              <option value="gaussian">Гауссов импульс</option>
              <option value="sine">Синусоида</option>
              <option value="custom">Пользовательская функция</option>
            </select>
          </div>

          <div class="control-group" id="custom-function-group">
            <label
              for="customFunctionInput"
              class="block text-sm font-medium text-slate-700 mb-1"
              >f(x, L) =</label
            >
            <textarea
              id="customFunctionInput"
              rows="3"
              class="mt-1 block w-full shadow-sm sm:text-sm border-slate-300 rounded-md focus:ring-blue-500 focus:border-blue-500 p-2"
            >
1.5 + 0.5 * Math.sin(4 * Math.PI * x / L)</textarea
            >
            <div
              class="info-box mt-2 text-xs text-slate-500 bg-slate-50 p-3 rounded-md border border-slate-200"
            >
              Используйте синтаксис JS. Доступны переменные <code>x</code> и
              <code>L</code>.<br />
              Пример: <code>x > L/2 ? 1 : Math.exp(-20 * (x-L/4)*(x-L/4))</code>
            </div>
          </div>
        </div>

        <button
          id="runButton"
          class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold mx-4 py-2 px-4 rounded-md transition duration-300 ease-in-out shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"
        >
          Запустить / Перезапустить
        </button>
      </div>
    </div>

    <!-- Основной контент с графиками -->
    <div
      id="main-content"
      class="flex-1 p-8 overflow-y-auto bg-white rounded-lg shadow-lg"
    >
      <header class="mb-8">
        <h1 class="text-3xl font-bold text-blue-600">
          Лабораторная работа №5 - Уравнение переноса
        </h1>
        <p class="text-slate-700 mt-2">
          Эта симуляция визуализирует решение одномерного уравнения переноса с
          использованием явного метода "против потока" и неявного
          центрированного метода. Используйте панель слева для изменения
          параметров симуляции и начальных условий.
        </p>
      </header>
      <div id="results-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <div class="chart-container bg-white p-6 rounded-lg shadow-lg">
          <h3 class="text-xl font-semibold text-blue-500 mb-4 text-center">
            Явный метод "против потока"
          </h3>
          <canvas id="explicitChart"></canvas>
        </div>
        <div class="chart-container bg-white p-6 rounded-lg shadow-lg">
          <h3 class="text-xl font-semibold text-blue-500 mb-4 text-center">
            Неявный центрированный метод
          </h3>
          <canvas id="implicitChart"></canvas>
        </div>
      </div>
    </div>
  </body>
</html>
